(function(e){var t={init:function(){e("#dokan-comments-table").on("click",".dokan-cmt-action",this.setCommentStatus);e("#dokan-comments-table").on("click","button.dokan-cmt-close-form",this.closeForm);e("#dokan-comments-table").on("click","button.dokan-cmt-submit-form",this.submitForm);e("#dokan-comments-table").on("click",".dokan-cmt-edit",this.populateForm);e(".dokan-check-all").on("click",this.toggleCheckbox)},toggleCheckbox:function(){e(".dokan-check-col").prop("checked",e(this).prop("checked"))},setCommentStatus:function(t){t.preventDefault();var n=e(this),r=n.data("comment_id"),i=n.data("cmt_status"),s=n.data("page_status"),o=n.data("post_type"),u=n.data("curr_page"),a=n.closest("tr"),f={action:"wpuf_comment_status",comment_id:r,comment_status:i,page_status:s,post_type:o,curr_page:u,nonce:dokan.nonce};e.post(dokan.ajaxurl,f,function(t){s===1?i===1||i===0?a.fadeOut(function(){a.replaceWith(t.data.content).fadeIn()}):a.fadeOut(function(){e(this).remove()}):a.fadeOut(function(){e(this).remove()});t.data["pending"]==null&&(t.data.pending=0);t.data["spam"]==null&&(t.data.spam=0);t.data["trash"]==null&&(t.data.trash=0);e(".comments-menu-pending").text(t.data.pending);e(".comments-menu-spam").text(t.data.spam);e(".comments-menu-trash").text(t.data.trash)})},populateForm:function(t){t.preventDefault();var n=e(this).closest("tr");if(n.next().hasClass("dokan-comment-edit-row")){n.next().remove();return}var r=e("#dokan-edit-comment-row").html(),i={author:n.find(".dokan-cmt-hid-author").text(),email:n.find(".dokan-cmt-hid-email").text(),url:n.find(".dokan-cmt-hid-url").text(),body:n.find(".dokan-cmt-hid-body").text(),id:n.find(".dokan-cmt-hid-id").text(),status:n.find(".dokan-cmt-hid-status").text()};n.after(_.template(r,i))},closeForm:function(t){t.preventDefault();e(this).closest("tr.dokan-comment-edit-row").remove()},submitForm:function(t){t.preventDefault();var n=e(this),r=n.closest("tr.dokan-comment-edit-row"),i={action:"dokan_update_comment",comment_id:r.find("input.dokan-cmt-id").val(),content:r.find("textarea.dokan-cmt-body").val(),author:r.find("input.dokan-cmt-author").val(),email:r.find("input.dokan-cmt-author-email").val(),url:r.find("input.dokan-cmt-author-url").val(),status:r.find("input.dokan-cmt-status").val(),nonce:dokan.nonce,post_type:r.find("input.dokan-cmt-post-type").val()};e.post(dokan.ajaxurl,i,function(e){if(e.success===!0){r.prev().replaceWith(e.data);r.remove()}else alert(e.data)})}};e(function(){t.init()})})(jQuery);